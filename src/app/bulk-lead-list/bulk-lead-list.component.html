
<div class="loder_body" *ngIf="loader==1">
  <div class="loder_wrapper">
    <img src="assets/images/betologo.png" alt="#"
      style="margin:0 auto; display: block; margin-bottom:30px; max-width: 280px;" />
    <div class="loader"></div>
  </div>
</div>



<app-adminheader></app-adminheader>

<div class="nextGen_admin_mainwrapper">

<div class="user_management_wrapper">
  <div class="user_management_inner">

    <h2> Contract Request List</h2>

    <div class="inner_search_wrapper">
        <div class="inner_content_wrapper">
            <!-- <div class="search_content">
                <h3> <input type="text"
                        placeholder="Search by Email"><button><i class="fa fa-search"
                            aria-hidden="true"></i></button> </h3>
            </div> -->
            <div class="search_content">
                <h3> 
                  <input type="text" placeholder="Search by Name" (keyup)="searchbyname($event.target.value)">
                </h3>
            </div>

            <!-- added by himadri start product search-->

            <div class="search_content">
                <h3>
                    <select [(ngModel)]='placeholderforselect' (click)="productSearchbyval(prodSelect)"
                        [(ngModel)]="prodSelect" required>
                        <option value="0" disabled>Select Product</option>
                        <option *ngFor="let productval of productList" value="{{productval.productname}}">
                            {{productval.productname}}</option>
                    </select>
                </h3>
            </div>

                                        <!-- added by himadri end product search-->

        <!-- added by himadri start Date Range search-->

            <span class="spanformnew">
            <form>
              <div class="form-group form-groupnew1">
                <input type="text" placeholder="Select Date Range" class="form-control"
                [(ngModel)]="filterval5" [ngModelOptions]="{standalone: true}"
                [bsConfig]="{ dateInputFormat: 'MM-DD-YYYY',  selectFromOtherMonth: false }"
                #drp="bsDaterangepicker" bsDaterangepicker>

                </div>
                <div class="form-group row form-groupbtndiv form-groupnew1">

                    <button type="submit" class="btn_search"  (click)="geteventarr()" > search </button>
                    <button type="submit" class="btn_search" (click)="setdatetonull()"> show all
                    </button>
                </div>

            </form>
            </span>


            <!-- added by himadri end Date Range search-->


        </div>
        <div class="clearfix"></div>
        <button *ngIf="checked_ids.length != 0 || allChecked_ids.length !=0" type="button" class="edit_user" (click)="assen_to_rep(replistmodal)"> Assen To Rep </button>
    </div>

  <div class="nexgen_admin_table">
    <div class="table-responsive admin_table_wrapper">
      <table class="table">

        <thead>
          <tr>
          <th>
            <input type="checkbox" [value]="datalist" (change)="isAllSelected($event)"/>
          </th>
            <th *ngFor="let head of headElements" scope="col">{{head}} </th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let el of datalist ;  let i = index">
            <td>
              <input type="checkbox" [value]="el._id" [checked]="check_true" (change)="checkUncheck($event)"/>
            </td>
            <td datalabel="Id" scope="row">{{i + 1}}</td>
            <td datalabel="Data">{{el.date_added}}</td>
            <td datalabel="Full Name">{{el.fullName}}</td>
            <td datalabel="Phone">{{el.Phone}}</td>
            <td datalabel="CompanyName">{{el.CompanyName}}</td>
            <td datalabel="Address">{{el.Address}}</td>
            <td datalabel="Web">{{el.Web}}</td>
            <td datalabel="Email">{{el.Email}}</td>
            <td datalabel="Batch Name">{{el.batch_name}}</td>
            <td datalabel="Created By">{{el.created_by}}</td>
            <td datalabel="Product Name">{{el.productName}}</td>
            <td datalabel="edit">
              <span class="edit_user" *ngIf=" cookeiservice.get('usertype') == 'contract_manager' && el.status =='ask_for_modification'"  (click)="modification(el)">View</span>
            </td>
          </tr>
        </tbody>
        
      </table>
      
      <!-- <nav aria-label="Page navigation example"> -->
        
      <!-- </nav> -->

    </div>
    <ul class="pagination paginationnew justify-content-center">
      <li [ngClass]="{disable: skipCount <= 26}" class="page-item prev">
        <a class="page-link" (click)="previouspage()">Previous</a>
      </li>
      <!-- <li class="page-item"><a class="page-link" href="#">1</a></li>
      <li class="page-item"><a class="page-link" href="#">2</a></li>
      <li class="page-item"><a class="page-link" href="#">3</a></li> -->
      <li class="page-item next">
        <a class="page-link" (click)="nextpage()">Next</a>
      </li>
    </ul>

  </div>
</div>
</div>
<app-footer></app-footer>


<!--Common confirmation modal-->
<ng-template #commonconfirmmodal>
  <div class="modal-body brandmanagement_modal successmodal_listing">
    <div class="logo_wrapper">
      <img src="assets/images/logo.png">
    </div>
    <div class="brand_messagebox">
      <h3>Are you sure that you want to delete this record ?</h3>
      <div class="btn_cnt">
        <button class="message_allow" (click)="confirmdelete(messagemodal)">Yes</button>
        <button class="message_deny" (click)="nodelete()">No</button>
      </div>
    </div>
  </div>
  <div>
  </div>
</ng-template>


<!-- rep list -->

<ng-template #replistmodal>
  <div class="modal-body brandmanagement_modal successmodal_listing">
    <!-- <div class="logo_wrapper">
      <img src="assets/images/logo.png">
    </div> -->
    <div class="search_content">
      <!-- <h3>Are you sure that you want to delete this record ?</h3> -->
      <h3>
        <label>Select Rep</label>
        <select (click)="productSearchbyval(filterval4)" placeholder="Select Rep">
            <option value="0" disabled>Select Rep</option>
            <option *ngFor="let item of rep_list" value="{{item._id}}">
                {{item.fullname}}</option>
        </select>
    </h3>
      <div class="btn_cnt">
        <button class="message_allow" (click)="confirmdelete(messagemodal)">Yes</button>
        <button class="message_deny" (click)="nodelete()">No</button>
      </div>
    </div>
  </div>
  <div>
  </div>
</ng-template>